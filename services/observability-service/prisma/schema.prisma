generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum KpiPeriod {
  DAILY
  WEEKLY
  MONTHLY
}

enum KpiFlag {
  OK
  WARNING
  CRITICAL
}

model KpiSnapshot {
  id        String    @id @default(uuid())
  key       String
  value     Float
  period    KpiPeriod
  flag      KpiFlag   @default(OK)
  metadata  Json?
  createdAt DateTime  @default(now())

  @@index([key, period])
  @@index([createdAt])
}
